<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../static/bootstrap/node_modules/bootstrap/dist/css/bootstrap.css">
    <link rel="stylesheet" href="../static/css/index.css">
    <title>Document</title>
</head>
<body>
        <!-- –ì–ª–∞–≤–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä -->
    <div class="container py-4">
        <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h1 class="navbar-brand mb-0">Crypto Chests</h1>
            <div class="dropdown">
                <button class="btn btn-outline-light dropdown-toggle" type="button" id="userDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                    <i class="bi bi-person-circle me-1"></i> User123
                </button>
                <ul class="dropdown-menu dropdown-menu-dark" aria-labelledby="userDropdown">
                    <li><a class="dropdown-item" href="#"><i class="bi bi-wallet2 me-2"></i>–ö–æ—à–µ–ª–µ–∫</a></li>
                    <li><a class="dropdown-item" href="#"><i class="bi bi-gear me-2"></i>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</a></li>
                    <li><hr class="dropdown-divider"></li>
                    <li><a class="dropdown-item" href="#"><i class="bi bi-box-arrow-right me-2"></i>–í—ã–π—Ç–∏</a></li>
                </ul>
            </div>
        </div>

        <!-- –ë–∞–ª–∞–Ω—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è -->
        <div class="balance-card p-4 mb-4 glow">
    <div class="row align-items-center">
        <div class="col-8 col-md-9">
    <p class="mb-1">–í–∞—à –±–∞–ª–∞–Ω—Å</p>
    <h2 class="ton-value mb-0 text-truncate" style="max-width: 90%">0 TON</h2>
    <small class="usd-value text-white-50">~ $0.00</small> <!-- –ò–∑–º–µ–Ω–∏–º –∫–ª–∞—Å—Å –Ω–∞ usd-value -->
</div>
        <div class="col-4 col-md-3 text-end">
            <button class="btn btn-primary btn-sm" data-bs-toggle="modal" data-bs-target="#depositModal">
                <i class="bi bi-plus-circle me-1"></i> –ü–æ–ø–æ–ª–Ω–∏—Ç—å
            </button>
        </div>
    </div>
</div>

        <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã -->
        <h3 class="section-title">–î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã</h3>
        <div class="row">
            {% for container in containers %}
    <div class="col-md-6 col-lg-4 mb-4">
        <div class="container-card {% if not container.is_active %}container-inactive{% endif %}" data-container-id="{{ container.id }}">
            <div class="container-image">
                <img src="{{ url_for('get_image', container_id=container.id) }}" alt="Image {{ container.id }}">
                <span class="container-price">{{ container.price }} TON</span>
            </div>
            <div class="container-content">
                <h4 class="container-title">{{ container.name }}</h4>
                <p class="container-desc">{{ container.description }}</p>
                <br>
                {% if container.is_active %}
                    <button class="btn-open-chest w-100" data-container-id="{{ container.id }}">
                        <span class="btn-icon">üóùÔ∏è</span>
                        <span class="btn-text">–û—Ç–∫—Ä—ã—Ç—å –∑–∞</span>
                        <span class="btn-price">{{ container.price }} TON</span>
                    </button>
                {% else %}
                    <button class="btn-open-chest w-100" disabled>
                        <span class="btn-text">–ù–µ–¥–æ—Å—Ç—É–ø–Ω–æ</span>
                    </button>
                {% endif %}
            </div>
        </div>
    </div>
{% endfor %}
        </div>
    </div>
    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å –ª—É—Ç-—Ç–∞–±–ª–∏—Ü–µ–π -->
<div class="modal fade" id="lootModal" tabindex="-1" aria-labelledby="lootModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="lootModalLabel">–ù–∞–≥—Ä–∞–¥—ã –≤ —Å—É–Ω–¥—É–∫–µ</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div id="lootTableContainer">
                    <table class="table table-dark">
                        <thead>
                            <tr>
                                <th>–ù–∞–≥—Ä–∞–¥–∞ (TON)</th>
                                <th>–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å</th>
                            </tr>
                        </thead>
                        <tbody id="lootTableBody">
                            <!-- –î–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω—ã —á–µ—Ä–µ–∑ JS -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º –æ—Ç–∫—Ä—ã—Ç–∏—è -->
<div class="modal fade" id="resultModal" tabindex="-1" aria-labelledby="resultModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="resultModalLabel">–†–µ–∑—É–ª—å—Ç–∞—Ç –æ—Ç–∫—Ä—ã—Ç–∏—è</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="text-center">
                    <h4 id="rewardAmount" class="text-warning">0 TON</h4>
                    <p>–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –≤—ã–ø–∞–¥–µ–Ω–∏—è: <span id="rewardProbability">0%</span></p>
                    <p>–ù–æ–≤—ã–π –±–∞–ª–∞–Ω—Å: <span id="newBalance">0 TON</span></p>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" data-bs-dismiss="modal">–û—Ç–ª–∏—á–Ω–æ!</button>
            </div>
        </div>
    </div>
</div>
    <!-- –ù–∏–∂–Ω—è—è –Ω–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω–∞—è –ø–∞–Ω–µ–ª—å -->
    <nav class="bottom-nav">
        <div class="d-flex justify-content-around">
            <a href="#" class="nav-item active">
                <i class="bi bi-house-door-fill nav-icon"></i>
                <span class="nav-label">–ì–ª–∞–≤–Ω–∞—è</span>
            </a>
            <a href="#" class="nav-item">
                <i class="bi bi-person nav-icon"></i>
                <span class="nav-label">–ü—Ä–æ—Ñ–∏–ª—å</span>
            </a>
            <a href="#" class="nav-item">
                <i class="bi bi-clock-history nav-icon"></i>
                <span class="nav-label">–ò—Å—Ç–æ—Ä–∏—è</span>
            </a>
            <a href="#" class="nav-item">
                <i class="bi bi-trophy nav-icon"></i>
                <span class="nav-label">–¢–æ–ø</span>
            </a>
        </div>
    </nav>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–∞ -->
    <div class="modal fade" id="depositModal" tabindex="-1" aria-labelledby="depositModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="depositModalLabel">–ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞ TON</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <form id="topUpBalanceForm" action="" method="post">
                    <div class="modal-body">
                        <div class="mb-3">
                            <label for="tonAmount" class="form-label">–°—É–º–º–∞ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è (TON)</label>
                            <input type="text" class="form-control" id="tonAmount" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É" name="amount">
                            <small class="form-text text-white-50">–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—É–º–º–∞ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è <span class="fw-bold text-warning text-decoration-underline">1 TON</span></small>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button id="btnTopUpBalance" type="submit" class="btn btn-primary w-100 disabled">–ü–æ–ø–æ–ª–Ω–∏—Ç—å –±–∞–ª–∞–Ω—Å</button>
                    </div>
                </form>
            </div>
        </div>
    </div>


    <script src="../static/js/index.js"></script>
    <script src="../static/bootstrap/node_modules/bootstrap/dist/js/bootstrap.js"></script>
    <script>
        form = document.getElementById("topUpBalanceForm")
        priceInput = document.getElementById("tonAmount")
        btn = document.getElementById("btnTopUpBalance")

        priceInput.addEventListener("keyup", (arg) => {
            if (parseFloat(priceInput.value) >= 0.2) {
                btn.classList.remove("disabled")
            } else {
                btn.classList.add("disabled")
            }
        })
    </script>
</body>
</html>